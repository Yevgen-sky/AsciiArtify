# Concept: Вибір інструменту для локального Kubernetes-кластеру для AsciiArtify

## 1. Вступ

Стартап **AsciiArtify** планує розробити сервіс для перетворення зображень у ASCII-art за допомогою Machine Learning.  
Для локальної розробки, тестування та підготовки PoC команда розглядає три інструменти для розгортання Kubernetes-кластерів:

- **minikube** — локальний Kubernetes-кластер на одній машині;
- **kind (Kubernetes IN Docker)** — запуск кластерів Kubernetes у контейнерах;
- **k3d** — запуск легкої дистрибуції Kubernetes (*k3s*) у Docker-контейнерах.

Окремо враховуються:

- ризики, повʼязані зі змінами ліцензування **Docker Desktop**;
- можливість використання контейнерного рушія **Podman** як альтернативи Docker.

Мета цього документу — порівняти інструменти, оцінити ризики та підготувати рекомендацію для PoC стартапу **AsciiArtify**.  
Практичним результатом є демо-деплой простого застосунку «Hello World» у локальному кластері Kubernetes.

---

## 2. Огляд інструментів

### 2.1. minikube

**Призначення:**  
Локальний Kubernetes-кластер «все в одному» для навчання та розробки. Орієнтований на простий старт: одна команда `minikube start`.

**Підтримувані ОС та архітектури:**

- ОС: Linux, macOS, Windows;
- архітектури: amd64, arm64 (залежить від драйвера/гіпервізора).

**Контейнерні рушії / драйвери:**

- Docker, Podman, containerd, CRI-O;
- різні VM-драйвери (VirtualBox, Hyper-V, KVM тощо).

**Автоматизація:**

- зручна CLI, легко інтегрується у скрипти й CI;
- підтримка профілів (`minikube profile`) для різних конфігурацій.

**Додатковий функціонал:**

- `minikube addons` — вбудовані аддони (dashboard, metrics-server, ingress тощо);
- `minikube tunnel`, `minikube service` — спрощений доступ до сервісів із хоста.

---

### 2.2. kind (Kubernetes IN Docker)

**Призначення:**  
Інструмент для запуску локальних Kubernetes-кластерів у контейнерах (через Docker / Podman / інші сумісні рушії). Спочатку створений для тестування самого Kubernetes, але активно використовується для локальної розробки та CI.

**Підтримувані ОС та архітектури:**

- ОС: Linux, macOS, Windows (через Docker/Podman/WSL2);
- архітектури: amd64, arm64 (залежить від контейнерного рушія).

**Контейнерні рушії:**

- Docker, Podman та інші сумісні інструменти.

**Автоматизація:**

- повністю керується через CLI (`kind create cluster`, `kind delete cluster`);
- часто використовується у GitHub Actions та інших CI-системах.

**Додатковий функціонал:**

- конфігурація кластеру через YAML (порти, ingress, кількість нод тощо);
- зручно створювати тимчасові кластери для тестів (ephemeral-кластери).

---

### 2.3. k3d

**Призначення:**  
Легковаговий «обгорток» для запуску **k3s** (мінімальної дистрибуції Kubernetes від Rancher) у Docker-контейнерах.

**Підтримувані ОС та архітектури:**

- ОС: Linux, macOS, Windows (за наявності Docker);
- архітектури: amd64, arm64 (залежить від Docker).

**Контейнерні рушії:**

- орієнтований на Docker як основний рушій для контейнерів.

**Автоматизація:**

- прості CLI-команди (`k3d cluster create`, `k3d cluster delete`);
- підтримка шаблонів для multi-node кластерів.

**Додатковий функціонал:**

- легковагова control-plane (k3s), менші вимоги до ресурсів;
- проста інтеграція з локальним Docker registry.

---

### 2.4. Podman як альтернатива Docker

**Podman** — контейнерний рушій, сумісний за CLI з Docker, який:

- працює у режимі **daemonless** (без центрального демона);
- підтримує **rootless**-режим (покращена безпека);
- часто використовується як «drop-in replacement» для Docker у Linux-середовищах.

Інструменти **minikube** та **kind** можуть працювати з Podman як бекендом, що дозволяє уникнути жорсткої привʼязки до Docker Desktop та його ліцензійних обмежень.

---

## 3. Порівняння інструментів

### 3.1. Таблиця порівняння

| Критерій                 | minikube                                      | kind                                          | k3d                                                |
|--------------------------|-----------------------------------------------|-----------------------------------------------|----------------------------------------------------|
| Тип                      | Локальний кластер «все в одному»             | Kubernetes у контейнерах                      | k3s (легкий Kubernetes) у Docker-контейнерах       |
| ОС                       | Linux, macOS, Windows                         | Linux, macOS, Windows                         | Linux, macOS, Windows                              |
| Контейнерний рушій       | Docker, Podman, containerd, CRI-O, VM-драйвери | Docker, Podman та сумісні рушії             | Docker                                             |
| Підтримка Podman         | Так (driver `podman`)                         | Так (через конфігурацію провайдера)           | Обмежено / через Docker-сумісні шари               |
| Швидкість розгортання    | Середня (може залежати від VM-драйвера)       | Висока (швидкий старт/видалення кластерів)    | Висока (легкий k3s + контейнери)                   |
| Споживання ресурсів      | Вищі, особливо з VM-драйверами                | Середні                                       | Низькі (легковагова дистрибуція k3s)               |
| Простота використання    | Дуже простий старт `minikube start`           | Простий CLI, але більше орієнтований на тести | Простий CLI, зручно для GitOps та воркшопів        |
| Додаткові аддони         | Так (`minikube addons`)                       | Ні (налаштовуються окремо)                    | Залежить від k3s, частина сервісів вбудована       |
| Документація та комʼюніті| Дуже велика спільнота                         | Велика спільнота Kubernetes-інженерів         | Активний open-source, дещо менша спільнота         |
| Типові сценарії          | Навчання, локальна розробка, PoC             | CI/CD, тестування, ephemeral-кластери         | Локальний dev, GitOps-демо, edge/IoT-сценарії      |
| Залежність від Docker Desktop | Необовʼязкова (можна Podman/VM)          | Потрібен Docker/Podman/WSL2                    | Потрібен Docker (Desktop/Engine)                   |

---

### 3.2. Переваги та недоліки

#### minikube

**Переваги:**

- спеціально позиціонується як «local Kubernetes» для розробників;
- багато аддонів «з коробки» (dashboard, ingress, metrics-server тощо);
- підтримка різних драйверів, включно з **Podman**;
- детальна документація, велика спільнота.

**Недоліки:**

- вищі вимоги до ресурсів порівняно з kind/k3d;
- інколи повільніший старт кластера;
- складніша інтеграція у CI, ніж у kind (який часто використовують саме в CI).

---

#### kind

**Переваги:**

- дуже швидке створення та видалення кластерів;
- добре підходить для CI, автоматизованих тестів, ephemeral-кластерів;
- може використовувати Podman як контейнерний рушій;
- гнучка конфігурація кластеру через YAML.

**Недоліки:**

- немає готових аддонів — більшість сервісів налаштовуються вручну;
- орієнтований більше на тестування Kubernetes, ніж на довготривалу локальну розробку;
- документація менш дружня для джуніорів, ніж у minikube.

---

#### k3d

**Переваги:**

- дуже легкий стек (k3s), низькі вимоги до ресурсів;
- швидкий старт кластерів;
- зручно для GitOps-демо, воркшопів та edge-сценаріїв;
- проста інтеграція з локальним Docker registry.

**Недоліки:**

- орієнтований на Docker як рушій — залежність від Docker Desktop на macOS/Windows;
- менше «готових» гайдів для початківців, ніж для minikube;
- особливості k3s (не 1:1 з «vanilla» Kubernetes), що може впливати на деякі аддони та інструменти.

---

### 3.3. Ризики ліцензування Docker Desktop

- **Docker Engine** на Linux залишається безкоштовним.
- **Docker Desktop** для macOS/Windows може вимагати платної підписки для компаній з певними розмірами (кількість співробітників, дохід).

Для стартапу **AsciiArtify** на ранньому етапі це не є критичним, але:

- у разі масштабування до великої компанії витрати на ліцензії Docker Desktop можуть збільшуватися;
- варто одразу мати сценарій, який не привʼязаний жорстко до Docker Desktop, а використовує:
  - Linux + Docker Engine,
  - або Podman,
  - або локальні кластери на базі minikube/kind/k3d з підтримкою альтернативних рушіїв.

---

## 4. Демонстрація: «Hello World» на рекомендованому інструменті

### 4.1. Обраний інструмент для PoC

З урахуванням:

- простоти використання для розробників без глибоких DevOps-знань;
- наявності вбудованих аддонів та дружньої документації;
- підтримки альтернативного контейнерного рушія **Podman**;

**рекомендованим інструментом для PoC AsciiArtify є `minikube`**.

Далі наведено приклад демо, виконаний на:

- ОС: **Ubuntu Desktop 24.04.3 LTS**;
- контейнерний рушій: **Podman**;
- кластер: **minikube**.

---

### 4.2. Крок 1. Старт кластера

```bash
minikube start --driver=podman
